<div class="card-body">
  <h4 class="card-title">List of books</h4>
  {{"Borrowed books: " + borrowedBooksIds}}
  <!-- {{borrows[1].book.title}} -->
  
  <div>
    <table class="table table-hover table-fixed">
      <thead class="thead-inverse">
        <tr>
          <th>#</th>
          <th>ISBN</th>
          <th>Title</th>
          <th>Author</th>
          <th>Genres</th>
          <th>Pages</th>
          <th>Publish Date</th>
          <th>Borrowed by/availible</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books" [class.selected]="book === selectedBook" (click)=onSelect(book)>
          <th scope="row">{{book.id}}</th>
          <td>{{book.isbnNumber}}</td>
          <td>{{book.title}}</td>
          <td>{{book.author.firstName+" "+book.author.lastName}}</td>
          <td>
            <div class="row">
              <div class="col">
                <div ngbDropdown class="d-inline-block">
                  <button class="btn btn-outline-secondary btn-sm btn-block" id="dropdownBasic1" ngbDropdownToggle>{{book.genres[0].type + '...'}}</button>
                  <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                    <button class="dropdown-item" *ngFor="let genre of book.genres">{{genre.type}}</button>
                  </div>
                </div>
              </div>
            </div>
          </td>
          <td>{{book.pageCount}}</td>
          <td>{{book.publishDate}}</td>
          <!-- <td>{{book.borrower ? book.borrower : 'availible'}}</td> -->
          <!-- <td>{{borrowedBooksIds.find(id => id == 1)}}</td> -->
          <td>TEMP</td>
        </tr>
      </tbody>
    </table>
  </div>
  <br>
  <div *ngIf="selectedBook" class="card border-secondary mb-3 w-50">
    <h5 class="card-header">{{selectedBook.title | uppercase}}</h5>
    <div class="card-body">
      <button class="btn btn-dark" (click)="gotoDetail()">View Details</button>
      <button class="btn btn-dark" (click)="edit()">Edit</button>
      <button class="btn btn-dark" (click)="delete(selectedBook); $event.stopPropagation()">Delete</button>
    </div>
  </div>
  <!-- <div>
    <label>Book title:</label> <input #bookTitle />
    <button (click)="add(bookTitle.value); bookTitle.value=''">Add</button>
  </div> -->
  <button id="add-button" class="btn btn-dark" (click)="gotoCreate()">Add book</button>
  <book-search></book-search>
</div>

<!-- <br><br><br><br><br><br>
<ul class="books">
  <li *ngFor="let book of books" [class.selected]="book === selectedBook" (click)=onSelect(book)>
    <span class="badge">{{book.id}}</span>
    <span>{{book.isbnNumber}}</span>
    <span>{{book.title}}</span>
    <span>{{book.author}}</span>
    <span>{{book.genre}}</span>
    <span>{{book.pageCount}}</span>
    <span>{{book.publishDate}}</span>
    <span>{{book.borrower}}</span>
    <button class="delete" (click)="delete(book); $event.stopPropagation()">x</button>
  </li>
</ul> -->